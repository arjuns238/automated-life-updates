name: Uptime ping

on:
  schedule:
    - cron: "*/10 * * * *"
  workflow_dispatch: {}

jobs:
  ping:
    runs-on: ubuntu-latest
    env:
      BACKEND_URL: ${{ secrets.BACKEND_URL }}
    steps:
      - name: Fail early if backend URL is missing
        run: |
          if [ -z "$BACKEND_URL" ]; then
            echo "Missing BACKEND_URL secret"
            exit 1
          fi
      - name: Ping backend
        run: |
          curl -fsS "$BACKEND_URL" -o /tmp/response.json -w "\nHTTP %{http_code}\n"
          echo "Response:"
          cat /tmp/response.json
